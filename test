function displayTreeFancy($categories, $parentId = null)
                  {
                      $hasChildren = false;
                      foreach ($categories as $cat) {
                          if ($cat['parent_id'] == $parentId) {
                              if (!$hasChildren) {
                                  echo "<ul class='tree'>";
                                  $hasChildren = true;
                              }
                  
                              
                              $hasSub = false;
                              foreach ($categories as $child) {
                                  if ($child['parent_id'] == $cat['id']) {
                                      $hasSub = true;
                                      break;
                                  }
                              }
                  
                              if ($hasSub) {
                                  echo "<li><details>";
                                  echo "<summary>
                                          <span class='folder-icon closed'>
                                          <svg width='18' height='18' fill='#ffd55f' class='bi bi-folder-fill mr-2' viewBox='0 0 16 16'>
                                                <path d='M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3m-8.322.12q.322-.119.684-.12h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981z'/>
                                             </svg>
                                            
                                          </span>
                                          <span class='folder-icon open d-none'>
                                            <svg width='18' height='18' fill='#ffd55f' class='bi bi-folder mr-2' viewBox='0 0 16 16'>
                                              <path d='M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z'/>
                                            </svg>
                                          </span>
                                          " . htmlspecialchars($cat['name']) . "
                                          <span>- ID: " . $cat['id'] . "</span>
                                          <span class='ms-2'>
                                            <button type='button' class='action-icon btnSvg' onclick=\"editCategory(" . $cat['id'] . ", '" . addslashes($cat['name']) . "', " . ($cat['parent_id'] ?? 'null') . ")\"><i class='fa fa-pen text-primary'></i></button>
                                            <button type='button' class='action-icon btnSvg' onclick=\"confirmDelete(" . $cat['id'] . ")\"><i class='fa fa-trash text-danger'></i></button>
                                          </span>
                                        </summary>";
                                  displayTreeFancy($categories, $cat['id']);
                                  echo "</details></li>";
                              } else {
                                  echo "<li>
                                          <i class='fa fa-file'></i> " . htmlspecialchars($cat['name']) . "
                                          <span class='ms-2'>
                                            <button type='button' class='action-icon btnSvg' onclick=\"editCategory(" . $cat['id'] . ", '" . addslashes($cat['name']) . "', " . ($cat['parent_id'] ?? 'null') . ")\"><i class='fa fa-pen text-primary'></i></button>
                                            <button type='button' class='action-icon btnSvg' onclick=\"confirmDelete(" . $cat['id'] . ")\"><i class='fa fa-trash text-danger'></i></button>
                                          </span>
                                        </li>";
                              }
                          }
                      }
                      if ($hasChildren) {
                          echo "</ul>";
                      }
                  }